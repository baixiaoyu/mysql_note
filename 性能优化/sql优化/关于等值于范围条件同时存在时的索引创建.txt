这个之前也是没有注意到过，原以为对于等值与范围条件同时存在时，创建索引的顺序是没有什么不同的，但是经过在5.6上的测试发现还真是有区别的。看到使用的索引字段是不同的，在第二种情况下使用了部分的索引，但是看执行计划除了key_len不同，别的都是相同的额，如果要看cost值，还需要使用trace来看


mysql> create index idx_test on t_bai(emp_no,from_date);
Query OK, 0 rows affected (0.71 sec)
Records: 0  Duplicates: 0  Warnings: 0

mysql> explain select * from t_bai where emp_no=88 and from_date>'2017-01-01';
+----+-------------+-------+-------+---------------+----------+---------+------+------+-----------------------+
| id | select_type | table | type  | possible_keys | key      | key_len | ref  | rows | Extra                 |
+----+-------------+-------+-------+---------------+----------+---------+------+------+-----------------------+
|  1 | SIMPLE      | t_bai | range | idx_test      | idx_test | 7       | NULL |    1 | Using index condition |
+----+-------------+-------+-------+---------------+----------+---------+------+------+-----------------------+


mysql> explain format=json select * from t_bai where emp_no=88 and from_date>'2017-01-01';
+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| EXPLAIN                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| {
  "query_block": {
    "select_id": 1,
    "table": {
      "table_name": "t_bai",
      "access_type": "range",
      "possible_keys": [
        "idx_test"
      ],
      "key": "idx_test",
      "used_key_parts": [
        "emp_no",
        "from_date"
      ],
      "key_length": "7",
      "rows": 1,
      "filtered": 100,
      "index_condition": "((`employees`.`t_bai`.`emp_no` = 88) and (`employees`.`t_bai`.`from_date` > '2017-01-01'))"
    }
  }
} |


mysql> create index idx_test on t_bai(from_date,emp_no);
Query OK, 0 rows affected (0.85 sec)
Records: 0  Duplicates: 0  Warnings: 0

mysql> explain select * from t_bai where emp_no=88 and from_date>'2017-01-01';
+----+-------------+-------+-------+---------------+----------+---------+------+------+-----------------------+
| id | select_type | table | type  | possible_keys | key      | key_len | ref  | rows | Extra                 |
+----+-------------+-------+-------+---------------+----------+---------+------+------+-----------------------+
|  1 | SIMPLE      | t_bai | range | idx_test      | idx_test | 3       | NULL |    1 | Using index condition |
+----+-------------+-------+-------+---------------+----------+---------+------+------+-----------------------+
1 row in set (0.00 sec)

mysql> explain format=json select * from t_bai where emp_no=88 and from_date>'2017-01-01';
+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| EXPLAIN                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| {
  "query_block": {
    "select_id": 1,
    "table": {
      "table_name": "t_bai",
      "access_type": "range",
      "possible_keys": [
        "idx_test"
      ],
      "key": "idx_test",
      "used_key_parts": [
        "from_date"
      ],
      "key_length": "3",
      "rows": 1,
      "filtered": 100,
      "index_condition": "((`employees`.`t_bai`.`emp_no` = 88) and (`employees`.`t_bai`.`from_date` > '2017-01-01'))"
    }
  }
} |
